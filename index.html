<!DOCTYPE html>
<html lang="ar" dir="ltr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ø£Ø«Ø± - Impact Compass</title>

  <!-- Ù…ÙƒØªØ¨Ø§Øª ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© PDF -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    :root {
      --primary: #102331;
      --primary-soft: #f5f7fb;
      --accent: #f58220;
      --text: #101318;
    }

    /* Regular */
    @font-face {
      font-family: 'DINNextArabic';
      src: url('fonts/ArbFONTS-DINNextLTArabic-Regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }

    /* Light */
    @font-face {
      font-family: 'DINNextArabic';
      src: url('fonts/ArbFONTS-DINNEXTLTARABIC-LIGHT.ttf') format('truetype');
      font-weight: 300;
      font-style: normal;
      font-display: swap;
    }

    /* Bold */
    @font-face {
      font-family: 'DINNextArabic';
      src: url('fonts/DIN NEXTâ„¢ï¸ ARABIC BOLD 2.otf') format('opentype');
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }

    /* Heavy */
    @font-face {
      font-family: 'DINNextArabic';
      src: url('fonts/DIN NEXTâ„¢ï¸ ARABIC HEAVY 2.otf') format('opentype');
      font-weight: 900;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: 'DINNextArabic';
      src: url('fonts/DINNextLTArabic-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    * {
      box-sizing: border-box
    }

    body {
      margin: 0;
      font-family: 'DINNextArabic', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #072638;
      color: var(--text);
      line-height: 1.7;
    }

    /* Ù„Ù…Ø§ Ù†ÙƒÙˆÙ† ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù†Ø¶ÙŠÙ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡Ø§ */
    body.questions-bg {
      background: url('questions-page-bg.jpeg') center center / cover no-repeat fixed;
    }

    /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ */
    .topbar {
      background: transparent;
      color: #fff;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10;
      padding: 14px 22px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      pointer-events: none;
    }

    .topbar-inner {
      pointer-events: auto;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logos {
      display: none;
      align-items: center;
      gap: 10px
    }

    .logos img {
      height: 48px;
      object-fit: contain
    }

    /* Landing Title Style (ÙƒØ¨ÙŠØ± Ø´ÙˆÙŠØ©) */
    .landing-title {
      font-family: 'DINNextArabic', sans-serif;
      font-size: 60px;
      font-weight: 800;
      line-height: 1.25;
      color: #ffffff;
      margin: 0 0 18px;
    }

    .landing-sub {
      font-family: 'DINNextArabic', sans-serif;
      font-size: 30px;
      font-weight: 400;
      line-height: 1.55;
      color: #dce6eb;
      max-width: 520px;
      margin-bottom: 28px;
    }

    .highlight {
      color: #f58220;
      font-weight: 900;
    }

    .lang-toggle {
      background: rgba(0, 0, 0, 0.45);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.7);
      border-radius: 999px;
      padding: 6px 16px;
      cursor: pointer;
      font-weight: 700;
      font-size: 20px;
    }

    /* Ø´Ø§Ø´Ø© Ø§Ù„Ù‡ÙŠØ±Ùˆ */
    .landing {
      min-height: 100vh;
      background: url('landing-2.jpeg') center center / cover no-repeat;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding-inline: 7%;
      position: relative;
      color: #fff;
    }

    .landing::after {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.35);
    }

    .landing-content {
      position: relative;
      z-index: 1;
      max-width: 1000px;
      text-align: left;
      direction: ltr;
    }

    .landing-title {
      font-size: 80px;
      font-weight: 800;
      margin: 0 0 14px;
    }

    .landing-sub {
      font-size: 40px;
      max-width: 800px;
      margin-bottom: 24px;
    }

    .landing-content .landing-title,
    .landing-content .landing-sub,
    .landing-content .landing-btn {
      direction: ltr;
      text-align: left;
    }

    .landing-btn {
      background: rgba(0, 0, 0, 0.55);
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.7);
      color: #fff;
      padding: 14px 46px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      backdrop-filter: blur(6px);
    }

    .landing-btn:hover {
      background: rgba(0, 0, 0, 0.75);
    }

    /* Ø§Ù„ÙƒÙˆÙ†ØªÙŠÙ†Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
    .container {
      max-width: 1400px;
      margin: 80px auto 32px;
      background: #ffffff;
      border-radius: 26px;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.35);
      padding: 40px 36px 32px;
    }

    h1 {
      margin: 8px 0 4px;
      color: var(--primary);
      text-align: center;
      font-size: 26px;
    }

    .subtitle {
      text-align: center;
      color: #555;
      margin-bottom: 20px;
      font-size: 15px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    #userForm {
      background: var(--primary-soft);
      border-radius: 24px;
      border: 1px solid #d7dbe5;
      padding: 28px 24px 24px;
      margin-top: 8px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-size: 15px
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"] {
      width: 100%;
      padding: 14px 16px;
      border: 1px solid #d7dbe5;
      border-radius: 999px;
      font-size: 16px;
    }

    .progress {
      margin: 24px 0 8px;
      height: 10px;
      background: #e7ebf3;
      border-radius: 999px;
      overflow: hidden;
    }

    .progress>span {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #f58220, #ffb347);
      transition: width 280ms ease-out;
    }

    .card {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 16px;
      padding: 18px 16px 16px;
      border: 1px solid #dde2f0;
      margin-top: 12px;
    }

    .q-title {
      margin: 0 0 12px;
      font-weight: 800;
      color: var(--primary);
      font-size: 16px;
    }

    label.option {
      display: block;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid #d2d8e7;
      margin: 7px 0;
      cursor: pointer;
      background: #fff;
      font-size: 14px;
    }

    label.option input {
      margin-inline-start: 6px
    }

    label.option:hover {
      border-color: #f58220;
    }

    .actions {
      display: flex;
      gap: 10px;
      justify-content: space-between;
      margin-top: 18px;
      flex-wrap: wrap;
    }

    .btn {
      background: var(--primary);
      font-family: 'DINNextArabic', sans-serif;
      color: #fff;
      border: 0;
      padding: 10px 20px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 800;
      font-size: 14px;
      min-width: 130px;
      text-align: center;
    }

    .btn:disabled {
      opacity: .4;
      cursor: not-allowed
    }

    .btn.secondary {
      background: #7e7e86
    }

    .btn.ghost {
      background: #fff;
      color: var(--primary);
      border: 2px solid var(--primary);
      font-family: 'DINNextArabic', sans-serif;
    }

    .result {
      display: none;
      font-family: 'DINNextArabic', sans-serif;
      margin-top: 18px;
      padding: 16px;
      border-radius: 14px;
      background: #f5f0ff;
      border: 1px solid #e1d4ff;
      text-align: center;
      font-size: 15px;
    }

    .footer-note {
      font-family: 'DINNextArabic', sans-serif;
      text-align: center;
      color: #8c8c93;
      margin: 16px 0 26px;
      font-size: 13px;
    }

    /* Ø´Ù‡Ø§Ø¯Ø© â€“ ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ Ø´Ø¨ÙŠÙ‡ Ø¨Ø§Ù„ØµÙˆØ±Ø© */
    .cert-wrap {
      width: 100%;
      display: none;
      justify-content: center;
      margin-top: 20px;
      padding: 32px 10px;
      border-radius: 20px;
      background: transparent;
    }

    .certificate {
      width: 100%;
      max-width: 500px;
      aspect-ratio: 476/672;
      border-radius: 16px;
      background: #ffffff;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.18);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 52px 40px 40px;
      color: #102331;
      gap: 10px;
      text-align: center;
      direction: ltr;
      position: relative;
      overflow: hidden;
    }

    .cert-logo {
      height: 52px;
      margin-bottom: 12px;
    }

    .cert-header-line {
      font-size: 16px;
      font-weight: 400;
      color: #222b38;
    }

    .cert-header-highlight {
      font-size: 18px;
      font-weight: 800;
      color: #5a1430;
      margin-bottom: 24px;
    }

    .cert-role {
      font-size: 18px;
      font-weight: 800;
      color: #e64c2b;
      margin-bottom: 6px;
      margin-top: 4px;
    }

    .cert-name {
      font-size: 26px;
      font-weight: 900;
      margin: 0 0 18px;
      color: #151a21;
    }

    .cert-desc {
      max-width: 360px;
      font-size: 14px;
      line-height: 1.8;
      color: #49515c;
      margin-bottom: 40px;
    }

    .certificate::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 110px;
      background: url('certificate-footer-shapes.png') center bottom / contain no-repeat;
      pointer-events: none;
    }

    .rtl {
      direction: rtl
    }

    .ltr {
      direction: ltr
    }

    .download-fab {
      position: fixed;
      bottom: 18px;
      right: 18px;
      width: 42px;
      height: 42px;
      border-radius: 50%;
      border: none;
      background: var(--accent);
      color: #fff;
      display: none;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
      font-size: 20px;
      z-index: 20;
    }

    .download-fab:hover {
      background: #d66d10;
    }

    @media (max-width:600px) {
      .landing-title {
        font-size: 50px
      }

      .landing-sub {
        font-size: 40px
      }

      .container {
        margin: 60px 10px 24px;
        padding: 26px 18px 24px;
      }

      #userForm {
        padding: 22px 16px 18px;
      }

      .certificate {
        padding: 40px 24px 32px;
      }

      .cert-name {
        font-size: 22px
      }

      .cert-header-highlight {
        font-size: 16px
      }
    }
  </style>
</head>

<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="logos">
        <img src="one-logo.png" alt="One Logo" />
      </div>
      <button id="langBtn" class="lang-toggle">En</button>
    </div>
  </header>

  <section id="landing" class="landing">
    <div class="landing-content">
      <h2 id="landingTitle" class="landing-title">
        Find your direction.<br>
        Create your impact.
      </h2>
      <p id="landingSub" class="landing-sub">
        Answer a few simple questions and discover your unique impact style with Team One.
      </p>
      <button id="landingStartBtn" class="landing-btn">START</button>
    </div>
  </section>

  <main id="appContainer" class="container" style="display:none">
    <h1 id="title">ğŸ§­ Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ø£Ø«Ø±</h1>
    <div id="subtitle" class="subtitle">Find your direction. Create your impact</div>

    <section id="userForm">
      <div class="grid-2">
        <div>
          <label id="lblName" for="name">Full Name</label>
          <input type="text" id="name" placeholder="name" inputmode="latin" autocomplete="off" />
        </div>
        <div>
          <label id="lblEmail" for="email">Email</label>
          <input type="email" id="email" placeholder="example@email.com" />
        </div>
      </div>
      <div style="margin-top:14px">
        <label id="lblPhone" for="phone">Phone</label>
        <input type="tel" id="phone" placeholder="05xxxxxxxx" />
      </div>
      <div class="actions" style="justify-content:flex-end; margin-top:16px">
        <button class="btn" id="startBtn">Start Quiz</button>
      </div>
    </section>

    <div id="progressWrap" style="display:none">
      <div class="progress"><span id="progressBar"></span></div>
      <div id="stepText" style="text-align:center; color:#666; font-size:14px"></div>
    </div>

    <section id="questionArea" style="display:none">
      <div class="card">
        <p class="q-title" id="qTitle">Ø³Ø¤Ø§Ù„ 1</p>
        <div id="options"></div>
        <div class="actions">
          <button class="btn ghost" id="prevBtn"> Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
          <div style="display:flex; gap:8px">
            <button class="btn" id="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
          </div>
        </div>
      </div>
    </section>

    <section id="resultBox" class="result"></section>

    <div id="postActions" class="actions" style="display:none; justify-content:center">
      <button class="btn secondary" id="restartBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      <button class="btn ghost" id="certBtn">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</button>
    </div>

    <div id="certWrap" class="cert-wrap">
      <div id="certificate" class="certificate">
        <img src="one-logo-colorful.png" alt="One Logo" class="cert-logo" />
        <div id="certHeader1" class="cert-header-line">
          Your Journey Toward inspiration and Impact
        </div>
        <div id="certHeader2" class="cert-header-line cert-header-highlight">
          Begins with Discovering Yourself
        </div>

        <div id="certRole" class="cert-role">The Creative</div>
        <div id="certName" class="cert-name">Participant Name</div>

        <p id="certDesc" class="cert-desc">
          You craft ideas, innovate solutions, and your skills pave the way for new opportunities and a greater
          influence.
        </p>
      </div>
    </div>

    <div class="footer-note"> ÙˆÙ† One</div>
  </main>

  <button id="downloadCSV" class="download-fab" title="Download CSV">â¬‡</button>

  <script id="embedded-questions" type="application/json">
 [
  {
    "id": 1,
    "ar": {
      "q": "Ù„Ù…Ø§ ØªÙˆØ§Ø¬Ù‡ ØªØ­Ø¯Ù‘ÙŠØŒ ÙˆØ´ Ø£ÙˆÙ„ Ø´ÙŠØ¡ ØªØ³ÙˆÙŠÙ‡ØŸ",
      "options": {
        "A": "ØªØ®Ø·Ø· ÙˆØªØ¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª",
        "B": "ØªØ¨ØªÙƒØ± ÙÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©",
        "C": "ØªØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ù„Ø­Ù„Ù‘Ù‡",
        "D": "ØªÙˆØ«Ù‚ ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø®Ø·ÙˆØ§Øª ÙˆØ§Ø¶Ø­Ø©"
      }
    },
    "en": {
      "q": "When you face a challenge, what do you do first?",
      "options": {
        "A": "Plan & gather info",
        "B": "Create a new idea",
        "C": "Talk to others to solve it",
        "D": "Document clear steps"
      }
    },
    "mapping": {
      "A": { "persona": "Analysis", "weight": 1 },
      "B": { "persona": "Creative", "weight": 1 },
      "C": { "persona": "PR",       "weight": 1 },
      "D": { "persona": "Reliable", "weight": 1 }
    }
  },
  {
    "id": 2,
    "ar": {
      "q": "Ø£ÙƒØ«Ø± Ø´ÙŠ ØªØ­Ø¨Ù‘Ù‡ ÙÙŠ Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØŸ",
      "options": {
        "A": "Ø§Ù„ØªÙ†Ø¸ÙŠÙ… ÙˆØ§Ù„ØªÙˆØ²ÙŠØ¹",
        "B": "Ø§Ù„Ø¹ØµÙ Ø§Ù„Ø°Ù‡Ù†ÙŠ ÙˆØ§Ù„Ø¥Ø¨Ø¯Ø§Ø¹",
        "C": "Ø§Ù„Ø­Ù…Ø§Ø³ ÙˆØ§Ù„Ø·Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„ÙØ±ÙŠÙ‚",
        "D": "Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©"
      }
    },
    "en": {
      "q": "What do you like most in teamwork?",
      "options": {
        "A": "Organizing & assigning",
        "B": "Brainstorming & creativity",
        "C": "Team energy",
        "D": "Documentation & outcomes"
      }
    },
    "mapping": {
      "A": { "persona": "Analysis", "weight": 1 },
      "B": { "persona": "Creative", "weight": 1 },
      "C": { "persona": "PR",       "weight": 1 },
      "D": { "persona": "Reliable", "weight": 1 }
    }
  },
  {
    "id": 3,
    "ar": {
      "q": "ØªÙØ¶Ù‘Ù„ ØªÙƒÙˆÙ† Ø®Ù„Ù Ø§Ù„ÙƒÙˆØ§Ù„ÙŠØ³ ÙˆÙ„Ø§ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©ØŸ",
      "options": {
        "A": "Ø®Ù„Ù Ø§Ù„ÙƒÙˆØ§Ù„ÙŠØ³ â€“ Ø£Ø­Ø¨ Ø£Ø¶Ø¨Ø· Ø§Ù„ØªÙØ§ØµÙŠÙ„",
        "B": "ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© â€“ Ø£Ø­Ø¨ Ø£ØªÙƒÙ„Ù… ÙˆØ£Ù‚Ù†Ø¹",
        "C": "Ø¨ÙŠÙ† Ø§Ù„Ø§Ø«Ù†ÙŠÙ† â€“ Ø£ÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø§Ù„ÙÙƒØ±Ø© ÙˆØ§Ù„ØªÙ†ÙÙŠØ°",
        "D": "Ù…Ø§ ÙŠÙ‡Ù…ØŒ Ø§Ù„Ù…Ù‡Ù… ÙŠÙ†Ø¬Ø­ Ø§Ù„Ø¹Ù…Ù„"
      }
    },
    "en": {
      "q": "Backstage or frontstage?",
      "options": {
        "A": "Backstageâ€”polish details",
        "B": "Frontstageâ€”speak & persuade",
        "C": "Balance both",
        "D": "Whatever gets it done"
      }
    },
    "mapping": {
      "A": { "persona": "Analysis", "weight": 1 },
      "B": { "persona": "PR",       "weight": 1 },
      "C": { "persona": "Creative", "weight": 1 },
      "D": { "persona": "Reliable", "weight": 1 }
    }
  },
  {
    "id": 4,
    "ar": {
      "q": "Ø£ÙƒØ«Ø± Ø´ÙŠ ÙŠØ¬Ø°Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù…ÙŠØ©ØŸ",
      "options": {
        "A": "Ø§Ù„ØªØ®Ø·ÙŠØ· ÙˆØ§Ù„Ø¬Ø¯ÙˆÙ„Ø©",
        "B": "Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„Ù‡ÙˆÙŠØ©",
        "C": "Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±",
        "D": "Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"
      }
    },
    "en": {
      "q": "What attracts you in media projects?",
      "options": {
        "A": "Planning & scheduling",
        "B": "Creative identity",
        "C": "Public engagement",
        "D": "Documentation & delivery"
      }
    },
    "mapping": {
      "A": { "persona": "Analysis", "weight": 1 },
      "B": { "persona": "Creative", "weight": 1 },
      "C": { "persona": "PR",       "weight": 1 },
      "D": { "persona": "Reliable", "weight": 1 }
    }
  },
  {
    "id": 5,
    "ar": {
      "q": "Ù„Ù…Ø§ ØªØ´ÙˆÙ ÙÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŒ ÙˆØ´ Ø£ÙˆÙ„ Ø´ÙŠ ÙŠØ®Ø·Ø± Ø¨Ø¨Ø§Ù„ÙƒØŸ",
      "options": {
        "A": "ÙƒÙŠÙ Ù†Ù‚Ø¯Ø± Ù†Ø·Ø¨Ù‘Ù‚Ù‡Ø§ Ø¹Ù…Ù„ÙŠÙ‹Ø§ØŸ",
        "B": "ÙƒÙŠÙ Ù†Ø®Ù„ÙŠÙ‡Ø§ Ø£ÙƒØ«Ø± Ø¥Ø¨Ø¯Ø§Ø¹Ù‹Ø§ØŸ",
        "C": "ÙƒÙŠÙ Ù†ÙˆØµÙ„Ù‡Ø§ Ù„Ù„Ù†Ø§Ø³ØŸ",
        "D": "ÙƒÙŠÙ Ù†ÙˆØ«Ù‘Ù‚Ù‡Ø§ Ø£Ùˆ Ù†Ù‚ÙŠØ³ Ø£Ø«Ø±Ù‡Ø§ØŸ"
      }
    },
    "en": {
      "q": "See a new ideaâ€”whatâ€™s first?",
      "options": {
        "A": "How to execute it?",
        "B": "How to make it more creative?",
        "C": "How to reach people?",
        "D": "How to document/measure?"
      }
    },
    "mapping": {
      "A": { "persona": "Reliable", "weight": 1 },
      "B": { "persona": "Creative", "weight": 1 },
      "C": { "persona": "PR",       "weight": 1 },
      "D": { "persona": "Analysis", "weight": 1 }
    }
  },
  {
    "id": 6,
    "ar": {
      "q": "Ø¥Ø°Ø§ Ø§Ù†Ø¶Ù…Ù‘ÙŠØª Ù„ÙØ±ÙŠÙ‚ â€œÙˆÙÙ†â€ØŒ Ø£ÙŠ Ø¯ÙˆØ± ÙŠÙ†Ø§Ø³Ø¨Ùƒ Ø£ÙƒØ«Ø±ØŸ",
      "options": {
        "A": "Ù…Ù†Ø³Ù‘Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ â€“ Ø£Ø­Ø¨ Ø§Ù„ØªÙ†Ø¸ÙŠÙ… ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©",
        "B": "Ø§Ù„Ù…Ø¨Ø¯Ø¹ â€“ Ø£ØµÙŠØº Ø§Ù„Ø£ÙÙƒØ§Ø± ÙˆØ£ØµÙ…Ù… Ø§Ù„ØªØ¬Ø§Ø±Ø¨",
        "C": "Ø§Ù„Ù…ØªØ­Ø¯Ø« â€“ Ø£Ø¨Ø±Ø¹ ÙÙŠ Ø§Ù„Ø¥Ù‚Ù†Ø§Ø¹ ÙˆØ§Ù„ØªÙ…Ø«ÙŠÙ„ ÙˆØ§Ù„Ø¸Ù‡ÙˆØ±",
        "D": "Ø§Ù„Ù…Ù†ØªØ¬ â€“ Ø£Ù†ÙØ° Ø¨Ø¯Ù‚Ø© ÙˆØ£ÙˆØµÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©"
      }
    },
    "en": {
      "q": "If you join Team One, best role?",
      "options": {
        "A": "Project coordinator",
        "B": "Creative maker",
        "C": "Spokesperson",
        "D": "Producer"
      }
    },
    "mapping": {
      "A": { "persona": "Analysis", "weight": 1 },
      "B": { "persona": "Creative", "weight": 1 },
      "C": { "persona": "PR",       "weight": 1 },
      "D": { "persona": "Reliable", "weight": 1 }
    }
  },
  {
    "id": 7,
    "ar": {
      "q": "ÙˆØ´ Ø£ÙƒØ«Ø± Ø´Ø¹ÙˆØ± ØªØ­Ø¨ ØªØ­Ù‚Ù‚Ù‡ Ø¨Ø¹Ø¯ Ø¥Ù†Ø¬Ø§Ø² Ù…Ø´Ø±ÙˆØ¹ØŸ",
      "options": {
        "A": "Ø¥Ù†Ù†Ø§ Ù†ÙØ°Ù†Ø§ Ø§Ù„Ø®Ø·Ø© Ø¨Ø¯Ù‚Ø©",
        "B": "Ø¥Ù†Ù†Ø§ Ù‚Ø¯Ù…Ù†Ø§ ÙÙƒØ±Ø© ØºÙŠØ± Ù…Ø³Ø¨ÙˆÙ‚Ø©",
        "C": "Ø¥Ù†Ù†Ø§ Ø£Ø«Ø±Ù†Ø§ ÙÙŠ Ø§Ù„Ù†Ø§Ø³",
        "D": "Ø¥Ù†Ù†Ø§ ÙˆØ«Ù‚Ù†Ø§ ØªØ¬Ø±Ø¨Ø© ØªØ³ØªØ­Ù‚ Ø§Ù„ØªÙƒØ±Ø§Ø±"
      }
    },
    "en": {
      "q": "Best feeling after a project?",
      "options": {
        "A": "Plan executed perfectly",
        "B": "Novel idea delivered",
        "C": "People were impacted",
        "D": "Documented for repeatability"
      }
    },
    "mapping": {
      "A": { "persona": "Analysis", "weight": 1 },
      "B": { "persona": "Creative", "weight": 1 },
      "C": { "persona": "PR",       "weight": 1 },
      "D": { "persona": "Reliable", "weight": 1 }
    }
  }
]
  </script>

  <script>
    const STRINGS = {
      ar: {
        landingTitle: "Find your direction. Create your impact",
        landingSub: "Answer a few questions and discover your unique impact style with Team One.",
        title: "ğŸ§­ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø£Ø«Ø±",
        subtitle: "Find your direction. Create your impact",
        lblName: "Full Name",
        lblEmail: "Email",
        lblPhone: "Phone",
        start: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±",
        prev: " Ø§Ù„Ø³Ø§Ø¨Ù‚",
        next: "Ø§Ù„ØªØ§Ù„ÙŠ",
        step: (i, n) => `Ø§Ù„Ø³Ø¤Ø§Ù„ ${i} Ù…Ù† ${n}`,
        mustUser: "Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆØ±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ø£ÙˆÙ„Ù‹Ø§.",
        mustAnswer: "Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ.",
        result: (persona, percent) => `Ø´Ø®ØµÙŠØªÙƒ Ù‡ÙŠ : <b>${persona}</b>`,
        downloadCSV: "ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ù†ØªØ§Ø¦Ø¬ CSV",
        restart: "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±",
        cert: "Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©",
        langBtn: "En",
        personas: {
          Analysis: "Thinker",
          Creative: "Creative",
          PR: "Speaker",
          Reliable: "Achiever"
        }
      },
      en: {
        landingTitle: "Find your direction. Create your impact",
        landingSub: "Answer a few questions and discover your unique impact style with Team One.",
        title: "ğŸ§­ Impact Compass",
        subtitle: "Find your direction. Create your impact",
        lblName: "Full Name",
        lblEmail: "Email",
        lblPhone: "Phone",
        start: "Start Quiz",
        prev: "Previous",
        next: "Next",
        step: (i, n) => `Question ${i} of ${n}`,
        mustUser: "Please enter name, email, and phone first.",
        mustAnswer: "Please select an answer before moving on.",
        result: (persona, percent) => `Your character is : <b>${persona}</b>`,
        downloadCSV: "Download CSV",
        restart: "Restart",
        cert: "Print Certificate",
        langBtn: "Ø¹",
        personas: {
          Analysis: "Thinker",
          Creative: "Creative",
          PR: "Speaker",
          Reliable: "Achiever"
        }
      }
    };

    const CERT_TEXT = {
      en: {
        Creative: {
          line1: "Your Journey Toward inspiration and Impact",
          line2: "Begins with Discovering Yourself",
          role: "The Creative",
          desc: "You craft ideas, innovate solutions, and your skills pave the way for new opportunities and a greater influence."
        },
        Analysis: {
          line1: "Your Journey Toward inspiration and Impact",
          line2: "Begins with Discovering Yourself",
          role: "The Thinker",
          desc: "You plan, shape strategies, and your skills pave the way for new opportunities and a greater influence."
        },
        Reliable: {
          line1: "Your Journey Toward inspiration and Impact",
          line2: "Begins with Discovering Yourself",
          role: "The Achiever",
          desc: "You turn ideas into tangible reality, and your skills pave the way for new opportunities and a greater influence."
        },
        PR: {
          line1: "Your Journey Toward inspiration and Impact",
          line2: "Begins with Discovering Yourself",
          role: "The Speaker",
          desc: "You deliver messages and inspire audiences, and your skills pave the way for new opportunities and a greater influence."
        }
      },
      ar: {
        Creative: {
          line1: "Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„Ø£Ø«Ø±",
          line2: "ØªØ¨Ø¯Ø£ Ù…Ù† Ø§ÙƒØªØ´Ø§Ù Ø°Ø§ØªÙƒ",
          role: "Ø£Ù†Øª Ù…Ø¨Ø¯Ø¹",
          desc: "ØªØµÙ†Ø¹ Ø§Ù„Ø£ÙÙƒØ§Ø± ÙˆØªØ¨ØªÙƒØ± Ø§Ù„Ø­Ù„ÙˆÙ„ØŒ ÙˆÙ…Ù‡Ø§Ø±Ø§ØªÙƒ ØªÙØªØ­ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù„ÙØ±Øµ Ø¬Ø¯ÙŠØ¯Ø© ÙˆØªØ£Ø«ÙŠØ± Ø£ÙƒØ¨Ø±."
        },
        Analysis: {
          line1: "Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„Ø£Ø«Ø±",
          line2: "ØªØ¨Ø¯Ø£ Ù…Ù† Ø§ÙƒØªØ´Ø§Ù Ø°Ø§ØªÙƒ",
          role: "Ø£Ù†Øª Ù…ÙÙƒÙ‘Ø±",
          desc: "ØªØ®Ø·Ø· ÙˆØªØ±Ø³Ù… Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§ØªØŒ ÙˆÙ…Ù‡Ø§Ø±Ø§ØªÙƒ ØªÙØªØ­ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù„ÙØ±Øµ Ø¬Ø¯ÙŠØ¯Ø© ÙˆØªØ£Ø«ÙŠØ± Ø£ÙƒØ¨Ø±."
        },
        Reliable: {
          line1: "Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„Ø£Ø«Ø±",
          line2: "ØªØ¨Ø¯Ø£ Ù…Ù† Ø§ÙƒØªØ´Ø§Ù Ø°Ø§ØªÙƒ",
          role: "Ø£Ù†Øª Ù…Ù†Ø¬ÙØ²",
          desc: "ØªØ­ÙˆÙ‘Ù„ Ø§Ù„Ø£ÙÙƒØ§Ø± Ø¥Ù„Ù‰ ÙˆØ§Ù‚Ø¹ Ù…Ù„Ù…ÙˆØ³ØŒ ÙˆÙ…Ù‡Ø§Ø±Ø§ØªÙƒ ØªÙØªØ­ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù„ÙØ±Øµ Ø¬Ø¯ÙŠØ¯Ø© ÙˆØªØ£Ø«ÙŠØ± Ø£ÙƒØ¨Ø±."
        },
        PR: {
          line1: "Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„Ø£Ø«Ø±",
          line2: "ØªØ¨Ø¯Ø£ Ù…Ù† Ø§ÙƒØªØ´Ø§Ù Ø°Ø§ØªÙƒ",
          role: "Ø£Ù†Øª Ù…ØªØ­Ø¯Ù‘ÙØ«",
          desc: "ØªÙ‚Ø¯Ù‘Ù… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØªÙÙ„Ù‡Ù… Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŒ ÙˆÙ…Ù‡Ø§Ø±Ø§ØªÙƒ ØªÙØªØ­ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù„ÙØ±Øµ Ø¬Ø¯ÙŠØ¯Ø© ÙˆØªØ£Ø«ÙŠØ± Ø£ÙƒØ¨Ø±."
        }
      }
    };

    let LANG = localStorage.getItem('impact_lang') || 'ar';

    function applyLang() {
      const S = STRINGS[LANG];

      document.documentElement.lang = LANG;
      // ğŸ‘‡ Ù†Ø«Ø¨Øª Ø§Ù„Ù„ÙŠØ§ÙˆØª ÙƒÙ„Ù‡ LTR Ø¹Ø´Ø§Ù† Ø§Ù„Ù€ container Ù…Ø§ ÙŠØªØ­Ø±ÙƒØ´
      document.documentElement.dir = 'ltr';
      document.documentElement.classList.toggle('rtl', LANG === 'ar');
      document.documentElement.classList.toggle('ltr', LANG === 'en');

      // Ø§Ù„Ù‡ÙŠØ±Ùˆ â€“ Ù†Øµ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ù„ÙƒÙ† Ø¨Ù†Ø­Ø¯Ù‘Ø«Ù‡ Ù…Ù† STRINGS
      document.getElementById('landingTitle').textContent = S.landingTitle;
      document.getElementById('landingSub').textContent = S.landingSub;
      document.getElementById('landingStartBtn').textContent = 'START';

      // Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ¨Ø§Ù‚ÙŠ Ø§Ù„ÙÙˆØ±Ù…
      document.getElementById('title').innerText = S.title;
      document.getElementById('subtitle').innerText = S.subtitle;
      document.getElementById('lblName').innerText = S.lblName;
      document.getElementById('lblEmail').innerText = S.lblEmail;
      document.getElementById('lblPhone').innerText = S.lblPhone;

      document.getElementById('startBtn').innerText = S.start;
      document.getElementById('prevBtn').innerText = S.prev;
      document.getElementById('nextBtn').innerText = S.next;
      document.getElementById('restartBtn').innerText = S.restart;
      document.getElementById('certBtn').innerText = S.cert;

      const langBtn = document.getElementById('langBtn');
      if (langBtn) langBtn.textContent = S.langBtn;

      if (latestPersona) updateCertificate(latestPersona);
    }

    document.getElementById('langBtn').addEventListener('click', () => {
      LANG = (LANG === 'ar') ? 'en' : 'ar';
      localStorage.setItem('impact_lang', LANG);
      applyLang();
      renderQuestion();
    });

    let QUESTIONS = [];
    let ANSWERS = {};
    let personaScores = { Analysis: 0, Creative: 0, PR: 0, Reliable: 0 };
    let currentIndex = 0;
    let submissions = [];
    let latestPersona = null;

    async function tryLoadQuestions() {
      const holder = document.getElementById('embedded-questions');
      try {
        const data = JSON.parse(holder.textContent);
        if (Array.isArray(data) && data.length) { QUESTIONS = data; return; }
      } catch (e) {
        console.warn('Embedded JSON parse error:', e);
      }
      QUESTIONS = [];
    }

    const qArea = document.getElementById('questionArea');
    const qTitle = document.getElementById('qTitle');
    const optionsWrap = document.getElementById('options');
    const progressWrap = document.getElementById('progressWrap');
    const progressBar = document.getElementById('progressBar');
    const stepText = document.getElementById('stepText');

    document.getElementById('landingStartBtn').addEventListener('click', () => {
      document.getElementById('landing').style.display = 'none';
      document.getElementById('appContainer').style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    document.getElementById('startBtn').addEventListener('click', () => {
      const name = val('name'), email = val('email'), phone = val('phone');
      if (!name || !email || !phone) {
        alert(STRINGS[LANG].mustUser);
        return;
      }
      document.getElementById('userForm').style.display = 'none';
      qArea.style.display = 'block';
      progressWrap.style.display = 'block';

      document.body.classList.add('questions-bg');

      renderQuestion();
    });

    document.getElementById('prevBtn').addEventListener('click', () => {
      if (currentIndex > 0) { currentIndex--; renderQuestion(); }
    });
    document.getElementById('nextBtn').addEventListener('click', () => {
      if (!ensureAnswered()) return;
      if (currentIndex < QUESTIONS.length - 1) { currentIndex++; renderQuestion(); }
      else { finish(); }
    });

    function val(id) { return document.getElementById(id).value.trim(); }

    const nameInput = document.getElementById('name');
    nameInput.addEventListener('input', function () {
      this.value = this.value.replace(/[^A-Za-z\s]/g, '');
    });

    function renderQuestion() {
      if (!QUESTIONS.length) return;
      const q = QUESTIONS[currentIndex];
      const S = STRINGS[LANG];
      const text = (LANG === 'ar') ? q.ar.q : q.en.q;
      const ops = (LANG === 'ar') ? q.ar.options : q.en.options;

      qTitle.textContent = text || (LANG === 'ar' ? `Ø³Ø¤Ø§Ù„ ${q.id}` : `Question ${q.id}`);
      optionsWrap.innerHTML = '';
      ['A', 'B', 'C', 'D'].forEach(k => {
        if (!ops[k]) return;
        const id = `q_${q.id}_${k}`;
        const lab = document.createElement('label');
        lab.className = 'option';
        lab.htmlFor = id;
        lab.innerHTML = `<input type="radio" name="q${q.id}" id="${id}" value="${k}" ${ANSWERS[q.id] === k ? 'checked' : ''}/> ${ops[k]}`;
        optionsWrap.appendChild(lab);
      });

      const pct = Math.round((currentIndex / QUESTIONS.length) * 100);
      progressBar.style.width = pct + '%';
      stepText.textContent = S.step(currentIndex + 1, QUESTIONS.length);

      document.getElementById('prevBtn').disabled = (currentIndex === 0);
      document.getElementById('nextBtn').textContent = (currentIndex === QUESTIONS.length - 1)
        ? (LANG === 'ar' ? 'Ø¥Ù†Ù‡Ø§Ø¡' : 'Finish')
        : S.next;
    }

    function ensureAnswered() {
      const q = QUESTIONS[currentIndex];
      const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
      if (!selected) {
        alert(STRINGS[LANG].mustAnswer);
        return false;
      }
      ANSWERS[q.id] = selected.value;
      return true;
    }

    function computeScores() {
      personaScores = { Analysis: 0, Creative: 0, PR: 0, Reliable: 0 };
      let total = 0;
      QUESTIONS.forEach(q => {
        const a = ANSWERS[q.id]; if (!a) return;
        const m = q.mapping[a] || { persona: 'Reliable', weight: 1 };
        personaScores[m.persona] += m.weight; total += m.weight;
      });
      return total || 1;
    }

    function finish() {
      const total = computeScores();
      let winner = 'Reliable', max = -1;
      for (const k in personaScores) {
        if (personaScores[k] > max) { max = personaScores[k]; winner = k; }
      }
      latestPersona = winner;
      const percent = Math.round((max / total) * 100);

      const S = STRINGS[LANG];
      const res = document.getElementById('resultBox');
      res.innerHTML = S.result(S.personas[winner], percent);
      res.style.display = 'block';
      document.getElementById('postActions').style.display = 'flex';

      document.getElementById('downloadCSV').style.display = 'inline-flex';

      updateCertificate(winner);

      const row = {
        name: val('name'), email: val('email'), phone: val('phone'),
        persona: winner, percentage: percent,
        answers: QUESTIONS.map(q => ANSWERS[q.id] || '')
      };
      submissions.push(row);
    }

    function updateCertificate(persona) {
      const langSet = CERT_TEXT['en'][persona] || CERT_TEXT['en'].Creative;

      document.getElementById('certHeader1').textContent = langSet.line1;
      document.getElementById('certHeader2').textContent = langSet.line2;
      document.getElementById('certRole').textContent = langSet.role;
      document.getElementById('certDesc').textContent = langSet.desc;
      document.getElementById('certName').textContent = val('name');

      document.getElementById('certWrap').style.display = 'flex';
    }

    document.getElementById('downloadCSV').addEventListener('click', () => {
      if (!submissions.length) return;
      const qCols = QUESTIONS.map((q, i) => `Q${i + 1}`);
      const headers = ["Name", "Email", "Phone", ...qCols, "Persona", "Percentage"];
      const rows = submissions.map(s => [s.name, s.email, s.phone, ...s.answers, s.persona, s.percentage + "%"]);

      let csv = headers.join(",") + "\n";
      rows.forEach(r => {
        csv += r.map(v => `"${(v ?? '').toString().replace(/"/g, '""')}"`).join(",") + "\n";
      });

      const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = "impact_compass_results.csv";
      document.body.appendChild(a); a.click(); a.remove();
    });

    document.getElementById('restartBtn').addEventListener('click', () => {
      ANSWERS = {};
      personaScores = { Analysis: 0, Creative: 0, PR: 0, Reliable: 0 };
      currentIndex = 0;
      latestPersona = null;

      document.getElementById('resultBox').style.display = 'none';
      document.getElementById('postActions').style.display = 'none';
      document.getElementById('certWrap').style.display = 'none';
      document.getElementById('questionArea').style.display = 'none';
      document.getElementById('progressWrap').style.display = 'none';

      document.body.classList.remove('questions-bg');

      document.getElementById('appContainer').style.display = 'none';
      document.getElementById('landing').style.display = 'flex';

      document.getElementById('userForm').style.display = 'block';
      document.getElementById('name').value = '';
      document.getElementById('email').value = '';
      document.getElementById('phone').value = '';

      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    document.getElementById('certBtn').addEventListener('click', async () => {
      const certWrap = document.getElementById('certWrap');
      const cert = document.getElementById('certificate');
      const name = (document.getElementById('name').value.trim() || 'certificate');

      if (!certWrap.style.display || certWrap.style.display === 'none') {
        certWrap.style.display = 'flex';
      }

      cert.scrollIntoView({ behavior: 'instant', block: 'center' });

      if (typeof html2canvas !== 'function') {
        alert('html2canvas Ù…Ø´ Ù…ØªØ­Ù…Ù‘Ù„ØŒ ØªØ£ÙƒØ¯ Ø¥Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø´ØºØ§Ù„.');
        return;
      }

      try {
        const canvas = await html2canvas(cert, {
          scale: 2,
          useCORS: true,
          backgroundColor: '#ffffff',
          logging: false
        });

        if (window.jspdf && window.jspdf.jsPDF) {
          const imgData = canvas.toDataURL('image/png');
          const { jsPDF } = window.jspdf;
// ğŸ‘‡ Ø®Ù„ÙŠ Ø§Ù„ÙÙˆØ±Ù…Ø§Øª A5 Ø¨Ø¯Ù„ A4
const pdf = new jsPDF({ orientation: 'portrait', unit: 'pt', format: 'a5' });

          const pageW = pdf.internal.pageSize.getWidth();
          const pageH = pdf.internal.pageSize.getHeight();
          const ratio = Math.min(pageW * 0.9 / canvas.width, pageH * 0.9 / canvas.height);
          const w = canvas.width * ratio;
          const h = canvas.height * ratio;
          const x = (pageW - w) / 2;
          const y = (pageH - h) / 2;

          pdf.addImage(imgData, 'PNG', x, y, w, h);

          const blobUrl = pdf.output('bloburl');
          window.open(blobUrl, '_blank');
        } else {
          const dataUrl = canvas.toDataURL('image/png');
          const win = window.open('', '_blank');
          if (win) {
            win.document.write(
              '<html><head><title>' + name + '</title></head><body style="margin:0;">' +
              '<img src="' + dataUrl + '" style="width:100%;height:auto;display:block;" />' +
              '</body></html>'
            );
            win.document.close();
          } else {
            alert('Ø§Ù„Ù…ØªØµÙØ­ Ù…Ù†Ø¹ ÙØªØ­ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯ØŒ Ø§ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø´ Ù…Ù† Ø¯Ø§Ø®Ù„ App.');
          }
        }
      } catch (err) {
        console.error('Export error:', err);
        alert('Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©. Ø¬Ø±Ù‘Ø¨ Ù…Ù† Ù…ØªØµÙØ­ Chrome/Edge Ø¹Ù„Ù‰ Ø§Ù„Ù„Ø§Ø¨ØªÙˆØ¨.');
      }
    });

    (async function init() {
      await tryLoadQuestions();
      applyLang();
    })();
  </script>
</body>

</html>